<div fxFlexFill fxLayout="row" fxLayoutAlign="center" class="flow-editor-container">
  <button *ngIf="!isSideScreenOpen" class="toggle-btn" (click)="toggleSidenav()">
    <span><i class="fas fa-chevron-right"></i></span>
  </button>
  <div class="editor-container" [ngClass]="isSideScreenOpen? 'side-open': ''" >
    <!-- Image of the phone -->
    <div id="phone-container">
       <!-- Inner area inside the phone container. Smaller box centered into the phone, 
        making it look it's "behind" the phone image when in fact, it's in front. -->
        <span></span>
      <div class="phone-inner">
        <!-- Fixed elements such as page title -->

        <!-- Target for custom elements-->
        <div id="flow-container-drop" 
          *ngIf="droppedItems"
          cdkDropList 
          [cdkDropListData]="droppedItems" 
          [cdkDropListConnectedTo]="['libraryDropList']" 
          (cdkDropListDropped)="drop($event)"
        >
          <ng-container *ngIf="droppedItems.length > 0; else noDroppedItems">
            @for(item of droppedItems; track item)
            {
              <app-flow-library-item [control]="item" (click)="createField(item)" [inEditor]="inEditor" cdkDrag>  </app-flow-library-item>
            }
            <button (click)="editButton()">{{ 'BOTS.BUTTON' | transloco}}</button>  
          </ng-container>

          <ng-template #noDroppedItems>
            <div class="placeholder-text">
              {{ 'BOTS.DRAG-ELEMENT' | transloco}}
            </div>
          </ng-template>
        </div>

        <!-- Fixed elements such as footer -->
      </div>
    </div>

    <div class="config-container" [ngClass]="droppedItems?.length > 0 ? 'edit-background': ''">
      <div class="card-title" *ngIf="droppedItems?.length > 0">
        <span class="screen-title">Screen title</span>
        <span class="mat-button" mat-button [matMenuTriggerFor]="menu">
          <i class="fa-solid fa-ellipsis-vertical menu-tooltip"></i>
        </span>
      </div>

      <mat-menu #menu="matMenu">
        <button mat-menu-item>{{ 'BOTS.SCREEN-SETTNGS' | transloco }}</button>
      </mat-menu>

      <ng-container #vcr> </ng-container>
      <div class="edit-btn" *ngIf="isEditing">
        <input placeholder="Button" (keyup)="onInputChange($event)"/>
        <span>{{currentCharCount}}/{{btnMaxChar}}</span>
      </div>
    </div>
    

    <div class="screen-config" *ngIf="droppedItems?.length > 0">
      <lib-flow-screen-settings></lib-flow-screen-settings>
    </div>
  </div>

</div>